@model NetsanGida.Model.Product

@{
    ViewBag.Title = Model.Name + "Detayı";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<script src="~/Areas/Admin/AdminLTE-master/plugins/sweetalert2/sweetalert2.all.min.js"></script>
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
<style>
    body {
        margin-top: 20px;
        background-color: #ffffff;
    }

    .be-comment-block {
        margin-bottom: 50px !important;
        border: 1px solid #edeff2;
        border-radius: 2px;
        border: 1px solid #ffffff;
    }

    .comments-title {
        font-size: 16px;
        color: #262626;
        margin-bottom: 15px;
        font-family: 'Conv_helveticaneuecyr-bold';
    }

    .be-img-comment {
        width: 60px;
        height: 60px;
        float: left;
        margin-bottom: 15px;
    }

    .be-ava-comment {
        width: 60px;
        height: 60px;
        border-radius: 50%;
    }

    .be-comment-content {
        margin-left: 80px;
    }

        .be-comment-content span {
            display: inline-block;
            width: 49%;
            margin-bottom: 15px;
        }

    .be-comment-name {
        font-size: 13px;
        font-family: 'Conv_helveticaneuecyr-bold';
    }

    .be-comment-content a {
        color: #383b43;
    }

    .be-comment-content span {
        display: inline-block;
        width: 49%;
        margin-bottom: 15px;
    }

    .be-comment-time {
        text-align: right;
    }

    .be-comment-time {
        font-size: 11px;
        color: #b4b7c1;
    }

    .be-comment-text {
        font-size: 13px;
        line-height: 18px;
        color: #7a8192;
        display: block;
        background: #f6f6f7;
        border: 1px solid #edeff2;
        padding: 15px 20px 20px 20px;
    }

    .form-group.fl_icon .icon {
        position: absolute;
        top: 1px;
        left: 16px;
        width: 48px;
        height: 48px;
        background: #f6f6f7;
        color: #b5b8c2;
        text-align: center;
        line-height: 50px;
        -webkit-border-top-left-radius: 2px;
        -webkit-border-bottom-left-radius: 2px;
        -moz-border-radius-topleft: 2px;
        -moz-border-radius-bottomleft: 2px;
        border-top-left-radius: 2px;
        border-bottom-left-radius: 2px;
    }

    .form-group .form-input {
        font-size: 13px;
        line-height: 50px;
        font-weight: 400;
        color: #b4b7c1;
        width: 100%;
        height: 50px;
        padding-left: 20px;
        padding-right: 20px;
        border: 1px solid #edeff2;
        border-radius: 3px;
    }

    .form-group.fl_icon .form-input {
        padding-left: 70px;
    }

    .form-group textarea.form-input {
        height: 150px;
    }
</style>

<!-- HEADING-BANNER START -->
<div class="heading-banner-area overlay-bg">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="heading-banner">
                    <div class="heading-banner-title">
                        <h2>Ürün Detayı</h2>
                    </div>
                    <div class="breadcumbs pb-15">
                        <ul>
                            <li><a href="index.html">Anasayfa</a></li>
                            <li>@Model.Name Detay</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- HEADING-BANNER END -->
<!-- PRODUCT-AREA START -->
<div class="product-area single-pro-area pt-80 pb-80 product-style-2">
    <div class="container">
        <div class="row shop-list single-pro-info no-sidebar">
            <!-- Single-product start -->
            <div class="col-lg-12">
                <div class="single-product clearfix">
                    <!-- Single-pro-slider Big-photo start -->
                    <div class="single-pro-slider single-big-photo view-lightbox slider-for">
                        <div>
                            <img src="@Model.Media?width=370&height=450&bgcolor=fff&format=jpg" alt="" />
                            <a class="view-full-screen" href="@Model.Media?width=370&height=450&bgcolor=fff&format=jpg" data-lightbox="roadtrip" data-title="@Model.Name">
                                <i class="zmdi zmdi-zoom-in"></i>
                            </a>
                        </div>
                    </div>
                    <!-- Single-pro-slider Big-photo end -->
                    <div class="product-info">
                        <div class="fix">
                            <h4 class="post-title floatleft">@Model.Name</h4>
                        </div>
                        <div class="fix mb-20">
                            <span class="pro-price">@Model.Price ₺</span>
                        </div>
                        <div class="product-description">
                            <p>@Html.Raw(Model.Description)</p>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Single-product end -->
        </div>
        <!-- single-product-tab start -->
        <div class="single-pro-tab">
            <div class="row">
                <div class="col-lg-10 col-md-10 col-sm-10 col-xs-12">
                    <div class="be-comment-block">
                        @{ var yorumlar = NetsanGida.Bll.bComment.GetAllApproves(Model.ProductId); }
                        <h1 class="comments-title">Yorumlar (@yorumlar.Count)</h1>
                        @foreach (var item in yorumlar)
                        {
                            <div class="be-comment">
                                <div class="be-img-comment">
                                    <a href="blog-detail-2.html">
                                        <img src="https://bootdey.com/img/Content/avatar/avatar1.png" alt="" class="be-ava-comment">
                                    </a>
                                </div>
                                <div class="be-comment-content">

                                    <span class="be-comment-name">
                                        <a href="#!">@item.NameSurname</a>
                                    </span>
                                    <span class="be-comment-time">
                                        <i class="fa fa-clock-o"></i>
                                        @item.CreateDate
                                    </span>

                                    <p class="be-comment-text">
                                        @item.Description
                                    </p>
                                </div>
                            </div>
                        }

                        <form id="comment-form" class="form-block" action="/Comment/Add" method="post">
                            <input type="hidden" name="ProductId" value="@Model.ProductId" />
                            <div class="row">
                                <div class="col-xs-12 col-sm-6">
                                    <div class="form-group fl_icon">
                                        <div class="icon"><i class="fa fa-user"></i></div>
                                        <input class="form-input" name="NameSurname" type="text" placeholder="Ad - Soyad">
                                    </div>
                                </div>
                                <div class="col-xs-12 col-sm-6 fl_icon">
                                    <div class="form-group fl_icon">
                                        <div class="icon"><i class="fa fa-envelope-o"></i></div>
                                        <input class="form-input" name="Mail" type="text" placeholder="E - Mail">
                                    </div>
                                </div>
                                <div class="col-xs-12 col-sm-6 fl_icon">
                                    <div class="form-group fl_icon">
                                        <div class="icon"><i class="fa fa-phone"></i></div>
                                        <input class="form-input" name="Phone" type="text" placeholder="Telefon">
                                    </div>
                                </div>
                                <div class="col-xs-12 col-sm-6 fl_icon">
                                    <div class="form-group fl_icon">
                                        <div class="icon"><i class="fa fa-envelope-open-text"></i></div>
                                        <input class="form-input" name="Title" type="text" placeholder="Başlık">
                                    </div>
                                </div>
                                <div class="col-xs-12">
                                    <div class="form-group">
                                        <textarea class="form-input" name="Description" required="" placeholder="Yorum"></textarea>
                                    </div>
                                </div>
                                <button id="btn_Submit" class="button-one submit-button mt-20" style="float:left; margin-left:12px;" data-text="Mesajı Gönder" type="button">Mesajı Gönder</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <!-- single-product-tab end -->
    </div>
</div>
<!-- PRODUCT-AREA END -->
<script src="~/latest/js/vendor/jquery-1.12.4.min.js"></script>

<script>
    //function ContactFormSubmit()
    $('#btn_Submit').click(function () {
        var form = $('#comment-form')[0];
        var data = new FormData(form);


        $.ajax({
            url: '/Comment/Add',
            type: 'POST',
            enctype: 'multipart/form-data',
            data: data,
            processData: false,
            contentType: false,
            cache: false,
            timeout: 600000,
            success: function (result) {
                if (result) {
                    Swal.fire({
                        title: "Yorum",
                        text: "Yorumunuz başarıyla gönderilmiştir.",
                        icon: 'success',
                        confirmButtonText: 'OK',
                        confirmButtonColor: '#3085d6'
                    });
                    $('#contact-form')[0].reset();
                }
                else {
                    Swal.fire({
                        title: "Yorum",
                        text: "Gerekli alanları lütfen doldurun.",
                        icon: 'danger',
                        confirmButtonText: 'OK',
                        confirmButtonColor: '#d33'
                    });
                }

            }
        });
    });
</script>
